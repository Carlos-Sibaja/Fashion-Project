<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
  <head>
    <meta charset="UTF-8">
    <link rel="stylesheet" th:href="@{/styles.css}"/>
    <link rel="stylesheet" th:href="@{/booking.css}"/>
    <script th:src="@{/booking.js}" defer></script>
    <title>NY5th FashLink</title>
  </head>
  <body>
    <header>
      <!--USER INFO-->
      <div class="header_container">
        <div class="login">

          <!-- Visible only when user is authenticated -->
          <span th:if="${loggedInUser != null}">
            <div class="logout_form">
              <span>Welcome, <span th:text="${loggedInUser}">User</span>!</span>
              <form th:action="@{/logout}" method="post" class="logout-form">
                <input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}" />
                <button type="submit" class="logout-button">Logout</button>
                <input type="hidden" th:value="${loggedInUserEmail}"/>
              </form>
            </div>
          </span>

          <!-- Visible only when user is not authenticated -->
          <span th:if="${loggedInUser == null}">
            <a th:href="@{/login}">Login</a>
            <a th:href="@{/sign_up}">Sign Up</a>
          </span>
        </div>
      </div>
    </header>
    <main>

      <!--LOGO + MENU-->
      <div class="nav_container">
        <div class="logo">
          <img src="/images/fashlink_logo.png">
        </div>
        <div class="menu">
          <a th:href="@{/}">HOME</a>
          <a th:href="@{/advisors}">ADVISORS</a>
          <a th:href="@{/fashion}">FASHION</a>
          <a th:href="@{/booking/my_profile}">MY PROFILE</a>
          <a th:href="@{/messages}">MESSAGES</a>
        </div>
      </div>

      <!--FORM-->


      <form action="/consultation" id="frmConsultation" method="post">
        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />

        <h1>Next Consultation</h1>
        <table>
          <!--1st line: Picture + Categories + Date/Time + button-->
          <tr>
            <td id="picture" rowspan="4"><img th:src="${bookings.getUrlPicture()}" alt="advisor picture"></td>
            <td id="categories" class="line1" th:text="${#strings.replace(bookings.getCategories(), '[', '').replace(']', '').replace(',', '  |  ')}">Categories</td>
            <td class="btn-adv1" rowspan="4">
              <p th:text="${bookings.getDate().concat(' - ').concat(bookings.getTime())}">Schedule </p>
              <span th:text="${bookings.getFormattedDateTime()}"></span>
              <button type="submit">
                <img src="/images/adv_btn_schedule.png" alt="schedule">
              </button>
            </td>
          </tr>

          <!--2nd line: Advisor's name-->
          <tr>
            <td class="line2" th:text="${bookings.getFirstName() + ' ' + bookings.getLastName().charAt(0) + '.'}" colspan="3">First Name</td>
          </tr>


        </table>

      </form>
    </main>
  </body>
</html>